(()=>{"use strict";let t=!1;setTimeout((()=>{if(t){let t=new Event("windowScroll");window.addEventListener("scroll",(function(e){document.dispatchEvent(t)}))}}),0);const e=document.querySelector(".wrapper-basket"),n=document.querySelector(".cards-home__row");function a(){const t=document.querySelector(".wrapper-basket").querySelectorAll(".wrapper-basket__price");let e=0;t.forEach((t=>{const n=t.closest(".wrapper-basket__item").querySelector(".counter-details__current_basket");e+=parseInt(t.textContent)*parseInt(n.textContent)})),console.log(e),document.querySelector(".price-basket-home__number").textContent=e+" ₽"}window.addEventListener("click",(function(t){let n;if("plus"===t.target.dataset.action||"minus"===t.target.dataset.action){n=t.target.closest(".counter-details").querySelector("[data-counter]")}if("plus"===t.target.dataset.action&&(n.textContent=++n.textContent),"minus"===t.target.dataset.action&&(parseInt(n.textContent)>1?n.textContent=--n.textContent:t.target.closest(".wrapper-basket")&&1===parseInt(n.textContent)&&(t.target.closest(".wrapper-basket__item").remove(),a())),t.target.closest(".wrapper-basket__item")&&t.target.closest(".counter-details__control_basket")&&a(),t.target.closest(".cards-home__button")){const n=t.target.closest(".cards-home__item"),r={id:n.dataset.id,img:n.querySelector(".cards-home__img").getAttribute("src"),title:n.querySelector(".cards-home__title").textContent,counter:n.querySelector(".counter-details__current").textContent,price:n.querySelector(".price-details__currency").textContent,weight:n.querySelector(".price-details__weight").textContent,quantity:n.querySelector(".cards-home__quantity").textContent},c=document.querySelector(`[data-card-id="${r.id}"]`);if(c){const t=c.querySelector(".counter-details__current_basket");t.textContent=parseInt(t.textContent)+parseInt(r.counter)}else{const t=`<div data-card-id='${r.id}' class="wrapper-basket__item">\n            <a href="" class="wrapper-basket__image"><img src="${r.img}" alt=""></a>\n            <div class="wrapper-basket__content">\n                <div class="wrapper-basket__title">${r.title}</div>\n                <div class="wrapper-basket__text">${r.quantity}/ ${r.weight}.</div>\n                <div class="wrapper-basket__row">\n                <div data-wrapper class="wrapper-basket__details counter-details counter-details_basket">\n                <button type='button' data-action="minus" class="counter-details__control counter-details__control_basket" >-</button>\n                <div data-counter class="counter-details__current counter-details__current_basket" >${r.counter}</div>\n                <button type='button' data-action="plus" class="counter-details__control counter-details__control_basket" >+</button>\n            </div>\n                    <div class="wrapper-basket__price">${r.price}</div>\n                </div>\n                \n            </div>\n        </div>`;e.insertAdjacentHTML("beforeend",t)}a(),document.querySelector(".wrapper-basket").children.length>0?document.querySelector(".basket-home__text").classList.add("_remove"):document.querySelector(".basket-home__text").classList.remove("_remove");document.querySelectorAll(".counter-details__current_null").forEach((t=>{console.log(t),t.textContent="1"}))}}));[{id:1,title:"Филадельфия хит ролл",itemsInBox:6,weight:180,price:300,imgSrc:"philadelphia.jpg"},{id:2,title:"Калифорния темпура",itemsInBox:6,weight:205,price:250,imgSrc:"california-tempura.jpg"},{id:3,title:"Запеченый ролл «Калифорния»",itemsInBox:6,weight:182,price:230,imgSrc:"zapech-california.jpg"},{id:4,title:"Филадельфия",itemsInBox:6,weight:230,price:320,imgSrc:"philadelphia.jpg"}].forEach((t=>{const e=`<div data-id="${t.id}" class="cards-home__item">\n        <a href="" class="cards-home__image"><img class="cards-home__img" src="img/roll/${t.imgSrc}" alt=""></a>\n        <div class="cards-home__content">\n            <div class="cards-home__title">${t.title}</div>\n            <div class="cards-home__quantity">${t.itemsInBox} шт.</div>\n            <div class="cards-home__details details-cards-home">\n                <div data-wrapper class="details-cards-home__counter counter-details">\n                    <button type='button' data-action="minus" class="counter-details__control">-</button>\n                    <div data-counter class="counter-details__current counter-details__current_null">1</div>\n                    <button type='button'data-action="plus" class="counter-details__control">+</button>\n                </div>\n                <div class="details-cards-home__price price-details">\n                    <div class="price-details__weight">${t.weight}</div>\n                    <div class="price-details__currency">${t.price} ₽</div>\n                </div>\n            </div>\n            <button type="button" class="cards-home__button">в корзину</button>\n        </div>\n    </div>`;n.insertAdjacentHTML("beforeend",e)})),window.FLS=!0,function(t){let e=new Image;e.onload=e.onerror=function(){t(2==e.height)},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(t){let e=!0===t?"webp":"no-webp";document.documentElement.classList.add(e)}))})();